<div class="main-table__buttons">
  <button class="btn-icon" type="button" (click)="dialogShow(dialogType.ADD)">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M18 18V2H2v16h16Zm-.222-18A2.222 2.222 0 0 1 20 2.222v15.556A2.222 2.222 0 0 1 17.778 20H2.222A2.222 2.222 0 0 1 0 17.778V2.222C0 .99 1 0 2.222 0h15.556Zm-8.89 5.556a1.111 1.111 0 1 1 2.223 0v3.333h3.333a1.111 1.111 0 1 1 0 2.222h-3.333v3.333a1.111 1.111 0 1 1-2.222 0v-3.333H5.556a1.111 1.111 0 1 1 0-2.222h3.333V5.556Z"/></svg>
  </button>
  
  <button class="btn-icon" type="button" [disabled]="!selectedClients.length" (click)="dialogShow(dialogType.REMOVE)">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="20" fill="none"><path d="M3.84 20c-.463 0-.86-.163-1.191-.49-.33-.326-.649-.718-.649-1.177V3h-.5a1 1 0 0 1 0-2h5.787a1 1 0 0 1 1-1h5.425a1 1 0 0 1 1 1H20.5a1 1 0 1 1 0 2H20v15.333c0 .445-.322.834-.66 1.167-.337.333-.73.5-1.18.5H3.84ZM18 3H4v15h14V3ZM7 14.962a1 1 0 1 0 2 0v-9a1 1 0 1 0-2 0v9Zm6-.055a1 1 0 1 0 2 0V5.963a1 1 0 0 0-2 0v8.944Z"/></svg>
  </button>
</div>

<div class="main-table__row" [class.main-table__header]="(clients$ | async)?.length">
  <input type="checkbox" id="checkbox__main" [checked]="selectedClients.length" [disabled]="!(clients$ | async)?.length" (change)="selectAllClients()">
  <label for=""></label>

  <div class="main-table__cell main-table__title">
    Имя
    <button class="btn-icon btn-icon_sm" type="button" (click)="filterClients(filterType.NAME)">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.023 44.023" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44.023 44.023"><g><g><path d="m43.729,.29c-0.219-0.22-0.513-0.303-0.799-0.276h-41.831c-0.286-0.026-0.579,0.057-0.798,0.276-0.09,0.09-0.155,0.195-0.203,0.306-0.059,0.128-0.098,0.268-0.098,0.418 0,0.292 0.129,0.549 0.329,0.731l14.671,20.539v20.662c-0.008,0.152 0.015,0.304 0.077,0.446 0.149,0.364 0.505,0.621 0.923,0.621 0.303,0 0.565-0.142 0.749-0.354l11.98-11.953c0.227-0.227 0.307-0.533 0.271-0.828v-8.589l14.729-20.583c0.392-0.391 0.392-1.025 0-1.416zm-16.445,20.998c-0.209,0.209-0.298,0.485-0.284,0.759v8.553l-10,9.977v-18.53c0.014-0.273-0.075-0.55-0.284-0.759l-13.767-19.274h38.128l-13.793,19.274z"/></g></g></svg>
    </button>
  </div>
  <div class="main-table__cell main-table__title">Фамилия</div>
  <div class="main-table__cell main-table__title main-table__cell_alt">
    <button class="btn-icon btn-icon_sm" type="button" (click)="filterClients(filterType.EMAIL)">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.023 44.023" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44.023 44.023"><g><g><path d="m43.729,.29c-0.219-0.22-0.513-0.303-0.799-0.276h-41.831c-0.286-0.026-0.579,0.057-0.798,0.276-0.09,0.09-0.155,0.195-0.203,0.306-0.059,0.128-0.098,0.268-0.098,0.418 0,0.292 0.129,0.549 0.329,0.731l14.671,20.539v20.662c-0.008,0.152 0.015,0.304 0.077,0.446 0.149,0.364 0.505,0.621 0.923,0.621 0.303,0 0.565-0.142 0.749-0.354l11.98-11.953c0.227-0.227 0.307-0.533 0.271-0.828v-8.589l14.729-20.583c0.392-0.391 0.392-1.025 0-1.416zm-16.445,20.998c-0.209,0.209-0.298,0.485-0.284,0.759v8.553l-10,9.977v-18.53c0.014-0.273-0.075-0.55-0.284-0.759l-13.767-19.274h38.128l-13.793,19.274z"/></g></g></svg>
    </button>
    E-mail
  </div>
  <div class="main-table__cell main-table__title main-table__cell_alt">
    <button class="btn-icon btn-icon_sm" type="button" (click)="filterClients(filterType.PHONE)">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.023 44.023" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44.023 44.023"><g><g><path d="m43.729,.29c-0.219-0.22-0.513-0.303-0.799-0.276h-41.831c-0.286-0.026-0.579,0.057-0.798,0.276-0.09,0.09-0.155,0.195-0.203,0.306-0.059,0.128-0.098,0.268-0.098,0.418 0,0.292 0.129,0.549 0.329,0.731l14.671,20.539v20.662c-0.008,0.152 0.015,0.304 0.077,0.446 0.149,0.364 0.505,0.621 0.923,0.621 0.303,0 0.565-0.142 0.749-0.354l11.98-11.953c0.227-0.227 0.307-0.533 0.271-0.828v-8.589l14.729-20.583c0.392-0.391 0.392-1.025 0-1.416zm-16.445,20.998c-0.209,0.209-0.298,0.485-0.284,0.759v8.553l-10,9.977v-18.53c0.014-0.273-0.075-0.55-0.284-0.759l-13.767-19.274h38.128l-13.793,19.274z"/></g></g></svg>
    </button>
    Телефон
  </div>
</div>

<div class="main-table__container">
  <ng-container *ngFor="let client of clients$ | async; let i = index">
    <div class="main-table__row">
      <input type="checkbox" (change)="selectClient(i)" [checked]="selectedClients.includes(i)">
      <label for=""></label>

      <div class="main-table__cell">
        <div class="main-table__name" (click)="dialogShow(dialogType.EDIT, i)">{{ client.name }}</div>
      </div>
      <div class="main-table__cell">{{ client.surname }}</div>
      <div class="main-table__cell main-table__cell_alt">{{ client.email }}</div>
      <div class="main-table__cell main-table__cell_alt">{{ client.phone }}</div>
    </div>
  </ng-container>
</div>

<ng-container *ngIf="isShowDialog">
  <it-dialog (isConfirmed)="confirm()"></it-dialog>
</ng-container>
